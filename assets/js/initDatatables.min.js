import initActionBtns from"./dataTableActionBtns.js";import initColumnFilter from"./dataTableColumnFilter.js";import exportButtonDefaults from"./dataTableExportCollection.js";import initSelectAllBtn from"./dataTableSelectAllBtn.js";(function($){initActionBtns();initColumnFilter();exportButtonDefaults();initSelectAllBtn();$.fn.initDataTables=function(config,options){const url=window.location.origin+window.location.pathname;let root=this;root.html('<table id="'+config.name+'" class="table table-striped table-bordered table-hover table-sm" style="width: 100%;"></table>');for(const column of config.options.columns){if(column.className==="action_btns_container"){column.render=$.fn.dataTable.render.dataTableActionBtns();column.width="1%"}}let dtOpts=$.extend({},typeof config.options==="function"?{}:config.options,options,{ajax:{url:url+"/datatable",type:config.method}});return new Promise((fulfill,reject)=>{let dt=$("table",root).DataTable(dtOpts);fulfill(dt)})};$.extend(true,$.fn.dataTable.defaults,{dom:"<'row'<'col-sm-6 col-lg-3'B><'col-sm-6 col-lg-3'l><'col-sm-6 col-lg-4'fr><'col-sm-6 col-lg-2 text-right'b>>"+"<'row'<'col-sm-12't>>"+"<'row'<'col-sm-5'i><'col-sm-7'p>>",scrollY:true,scrollX:true,scrollCollapse:true,scroller:{loadingIndicator:true,displayBuffer:20},buttons:["select_all","export_collection",{extend:"colvis",text:'<i class="far fa-eye"></i>',titleAttr:"Column visibility",columns:":not('.action_btns_container,:first')",postfixButtons:["colvisRestore"]}],select:{style:"multi",selector:"td:not(.action_btns_container)",blurable:true},stateSave:true,stateSaveParams:function(settings,data){delete data.search;for(let i=0;i<data.columns.length;i++){delete data.columns[i].search}},dataTableColumnFilter:true});$.fn.dataTable.Buttons.defaults.dom.button.className="btn btn-default";$.fn.dataTable.ext.errMode="throw"})(jQuery);function jsGetDataTableHeightPx(){let id="tableData";let retHeightPx=350;let dataTable=document.getElementById(id);if(!dataTable){return retHeightPx}const pageHeight=$(window).height();if(pageHeight<0){return retHeightPx}let dataTableHeight=pageHeight-320;let dataTablePos=$("#"+id).offset();if(dataTablePos!=null&&dataTablePos.top>0){dataTableHeight=pageHeight-dataTablePos.top-120;retHeightPx=Math.max(100,dataTableHeight)}return retHeightPx}